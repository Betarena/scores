# ....................................
# ... GITHUB ACIONS CI/CD WORKFLOW ...
# ....................................
# DESCRIPTION
# ....................................
# This Github Action is responsible with the
# auto-deployment of the main (branch) to the
# location of the server
# ....................................

name: ðŸš€ Deployment
# [â„¹] when to trigger this project
on:
  push:
    branches: [main]
# [â„¹] JOBS TO DO WITH GITHUB WORFLOWS;
jobs:
  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
    - name: executing remote ssh commands using password
      uses: appleboy/ssh-action@v0.1.7
      # [â„¹] declaring ENV variables to be used in the project-CI/CD
      with:
        host: ${{secrets.WEB_SERVER_HOST}}
        username: ${{secrets.WEB_SERVER_USERNAME}}
        key: ${{secrets.WEB_SERVER_KEY}}
        port: ${{secrets.WEB_SERVER_PORT}}
        script: | 
          # [â„¹] Navigate to target project directory
          cd web/scores
          # [â„¹] Update the directory with latests changes
          git pull origin main
          # [â„¹] Run target makefile command
          make update-scores-web