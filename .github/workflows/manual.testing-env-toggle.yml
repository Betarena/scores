# â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
# â”‚ ðŸ™ GITHUB ACIONS CI/CD WORKFLOW                                  â”‚
# â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

name: 'ðŸš¦ // testing environment toggle'

on:
  # â•­â”€â”€â”€â”€â”€
  # â”‚ NOTE:
  # â”‚ |: Debugging / Testing only
  # â•°â”€â”€â”€â”€â”€
  # push:
  #   branches:
  #     - chore/miscellenous/draft/3
  # â•­â”€â”€â”€â”€â”€
  # â”‚ NOTE:
  # â”‚ |: Manual trigger from GitHub UI
  # â•°â”€â”€â”€â”€â”€
  workflow_dispatch:
    inputs:
      state:
        description: 'Select NEW testing environment state'
        required: true
        default: 'off'
        type: choice
        options:
          - 'on'
          - 'off'
#

jobs:

  toggle-testing-environment:
    name: ðŸš¦ JOB - Toggle Testing Environment
    runs-on: ubuntu-22.04
    steps:
      - uses: actions/checkout@v3
        with:
          ref: ${{ github.ref }}
      - name: 'STEP /:/ install heroku-cli'
        run: |
          curl https://cli-assets.heroku.com/install.sh | sh
      - name:  'STEP /:/ login to heroku'
        run: echo "HEROKU_API_KEY=${{ secrets.HEROKU_API_KEY }}" >> $GITHUB_ENV
      - name: 'STEP /:/ toggle testing environment'
        run: |
          if [ "${{ github.event.inputs.state }}" = "on" ]; then
            heroku maintenance:off --app betarena-scores-platform
          else
            heroku maintenance:on --app betarena-scores-platform
          fi
#