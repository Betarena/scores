// â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
// â”‚ ğŸ“Œ High Order Component Overview                                                 â”‚
// â”£â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”«
// â”‚ â¤ Internal Svelte Code Format :|: V.8.0                                          â”‚
// â”‚ â¤ Status :|: ğŸ”’ LOCKED                                                           â”‚
// â”‚ â¤ Author(s) :|: @migbash                                                         â”‚
// â”£â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”«
// â”‚ ğŸ“ Description                                                                   â”‚
// â”£â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”«
// â”‚ Main Scores Platform Page Loader ('Client-Side')                                 â”‚
// â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

// #region â¤ ğŸ“¦ Package Imports

import { LoadEvent, redirect } from '@sveltejs/kit';

import { ERROR_CODE_INVALID, FIXTURE_PAGE_ERROR_MSG, dlogv2 } from '$lib/utils/debug';
import { preloadExitLogic, promiseValidUrlCheck } from '$lib/utils/platform-functions.js';

// #endregion â¤ ğŸ“¦ Package Imports

/**
 * @author
 *  @migbash
 * @summary
 *  ğŸŸ¥ MAIN
 * @description
 *  ğŸ“£ Logic for `[[lang=lang]]` route data preload.
 * @return { Promise < {} > }
 *  ğŸ“¤ Respective `data` for _this_ route.
 */
export async function main
(
  event: LoadEvent,
  parentData:
  {
    langParam: string
  }
): Promise < {} >
{
  const
    // [ğŸ]
    t0: number = performance.now(),
    // â•­â”€â”€â”€â”€â”€
    // â”‚ NOTE:
    // â”‚ > ğŸ“£ Destruct `object`.
    // â•°â”€â”€â”€â”€â”€
    {
      // lang,
      sport,
      country
    } = event.params,
    /**
     * @description
     *  ğŸ“£ Validate **this** `url`.
     */
    isUrlValid
      = await promiseValidUrlCheck
      (
        event.fetch,
        {
          langUrl: parentData.langParam,
          sportUrl: sport,
          countryUrl: country,
        }
      ),
    /**
     * @description
     *  ğŸ“£ `Data` object for target `route`.
     */
    response: any = {}
  ;

  if (!isUrlValid)
    preloadExitLogic
    (
      t0,
      '[country]',
      ERROR_CODE_INVALID,
      FIXTURE_PAGE_ERROR_MSG
    );
  ;

  // [ğŸ]
  dlogv2
  (
    'ğŸš checkpoint â¤ src/routes/(scores)/[[lang=lang]]/[sport]/[country]/+page.ts',
    [
      `â³ [LEAGUE] preload ${((performance.now() - t0) / 1000).toFixed(2)} sec`,
      // `ğŸ”¹ [var] â¤ response :|: ${JSON.stringify(response)}`,
    ],
    true
  );

  const
    redirectUrl: string
      = parentData.langParam == 'en'
        ? '/'
        : `/${parentData.langParam}`
  ;

  throw redirect
  (
    302,
    `${redirectUrl}`
  );

  // return;
}
