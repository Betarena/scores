// â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
// â”‚ ðŸ“Œ High Order Component Overview                                                 â”‚
// â”£â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”«
// â”‚ âž¤ Internal Svelte Code Format :|: V.8.0                                          â”‚
// â”‚ âž¤ Status :|: ðŸ”’ LOCKED                                                           â”‚
// â”‚ âž¤ Author(s) :|: @migbash                                                         â”‚
// â”£â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”«
// â”‚ ðŸ“ Description                                                                   â”‚
// â”£â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”«
// â”‚ Main Scores Platform Device Logic                                                â”‚
// â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

// #region âž¤ ðŸ“¦ Package Imports

import DeviceDetector from 'device-detector-js';
import parser from 'ua-parser-js';

import { dlogv2 } from '$lib/utils/debug';

// #endregion âž¤ ðŸ“¦ Package Imports

/**
 * @author
 *  @migbash
 * @summary
 *  ðŸŸ¦ HELPER
 * @description
 *  ðŸ“£ Detect device used from target `User-Agent` data.
 * @param { string } userAgent
 *  ðŸ’  **[required]** Target `user-agent` string.
 * @see https://discord.com/channels/457912077277855764/1067871458233159750
 * @see https://discord.com/channels/457912077277855764/1067529519294070885/1067827869004341319
 * @returns { string }
 *  ðŸ“¤ Target `device` type.
 */
export function detectDeviceWithUA
(
  userAgent: string
): string
{
  let
    /**
     * @description
     *  ðŸ“£ Target `device type`.
     */
    deviceType: string = 'mobile'
  ;

  const
    /**
     * @description
     *  ðŸ“£ Using `ua-parser-js` module.
     */
    parsedUA = parser(userAgent),
    /**
     * @description
     *  ðŸ“£ Using 'device-detector-js' module.
     */
    parsedUA2
      = new DeviceDetector().parse
      (
        userAgent
      )
  ;

  // [ðŸž]
  dlogv2
  (
    'detectDeviceWithUA(..)',
    [
      `ðŸ”¹ [var] âž¤ detectDeviceWithUA(..) parsedUA ${JSON.stringify(parsedUA, null, 4)}`,
      `ðŸ”¹ [var] âž¤ detectDeviceWithUA(..) parsedUA2 ${JSON.stringify(parsedUA2, null, 4)}`,
      `ðŸ”¹ [var] âž¤ detectDeviceWithUA(..) deviceType ${deviceType}`,
    ],
    false
  );

  deviceType = (parsedUA.device.type ?? 'mobile');
  deviceType = (parsedUA2.device?.type ?? 'mobile');

  return deviceType;
}

/**
 * @author
 *  @migbash
 * @summary
 *  ðŸŸ¦ HELPER
 * @description
 *  ðŸ“£ Identifies wether `PWA` is running.
 * @return { boolean }
 *  ðŸ“¤ Wether `app` is running in `PWA` mode.
 */
export function isPWA
(
): boolean
{
  return ['fullscreen', 'standalone', 'minimal-ui']
    .some
    (
      (displayMode) => {return window.matchMedia('(display-mode: ' + displayMode + ')').matches}
    )
  ;
}
