<!--
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ ğŸ“Œ High Order Component Overview                                                 â”‚
â”£â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”«
â”‚ â¤ Internal Svelte Code Format |:| V.8.0                                          â”‚
â”‚ â¤ Status |:| ğŸ”’ LOCKED                                                           â”‚
â”‚ â¤ Author(s) |:| @migbash                                                         â”‚
â”£â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”«
â”‚ ğŸ“ Description                                                                   â”‚
â”£â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”«
â”‚ Betarena (Component) || Authors Content Main                                     â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
-->

<!--
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ ğŸŸ¦ Svelte Component JS/TS                                                        â”‚
â”£â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”«
â”‚ â¤ HINT: â”‚ Access snippets for '<script> [..] </script>' those found in           â”‚
â”‚         â”‚ '.vscode/snippets.code-snippets' via intellisense using 'doc'          â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
-->

<script lang="ts">

  // #region â¤ ğŸ“¦ Package Imports

  // â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
  // â”‚ NOTE:                                                                  â”‚
  // â”‚ Please add inside 'this' region the 'imports' that are required        â”‚
  // â”‚ by 'this' .svelte file is ran.                                         â”‚
  // â”‚ IMPORTANT                                                              â”‚
  // â”‚ Please, structure the imports as follows:                              â”‚
  // â”‚ 1. svelte/sveltekit imports                                            â”‚
  // â”‚ 2. project-internal files and logic                                    â”‚
  // â”‚ 3. component import(s)                                                 â”‚
  // â”‚ 4. assets import(s)                                                    â”‚
  // â”‚ 5. type(s) imports(s)                                                  â”‚
  // â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

  import { browser } from '$app/environment';
  import { page } from '$app/stores';

  import { get } from '$lib/api/utils.js';
  import sessionStore from '$lib/store/session.js';
  import userBetarenaSettings from '$lib/store/user-settings.js';
  import { dlogv2, log_v3 } from '$lib/utils/debug.js';
  import { viewportChangeV2 } from '$lib/utils/device.js';

  import Button from '$lib/components/ui/Button.svelte';
  import ArticleCard from '../../../common_ui/articles/Article-Card.svelte';
  import ArticleLoader from './Article-Loader.svelte';

  import { prepareArticlesMap, type IArticle, type ITagsWidgetData } from '../../helpers.js';

  import type { IPageTranslationHomeDataFinal } from '@betarena/scores-lib/types/v8/core.translation.js';
  import type { IPageAuthorTagDataFinal } from '@betarena/scores-lib/types/v8/preload.authors.js';

  // #endregion â¤ ğŸ“¦ Package Imports

  // #region â¤ â›©ï¸ TYPES

  /**
   * @author
   *  @migbash
   * @summary
   *  ğŸ”¹ INTERFACE
   * @description
   *  ğŸ“ Interface for `_this_` page required at preload.
   */
  interface IPreloadResponse
  {
    /**
     * @description
     */
    objAuthorContentHome?: IPageAuthorTagDataFinal;
    /**
     * @description
     */
    objAuthorContentForecast?: IPageAuthorTagDataFinal;
    /**
     * @description
     */
    objGeneralHomeTranslation?: IPageTranslationHomeDataFinal;
  }

  // #endregion â¤ â›©ï¸ TYPES

  // #region â¤ ğŸ“Œ VARIABLES

  // â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
  // â”‚ NOTE:                                                                  â”‚
  // â”‚ Please add inside 'this' region the 'variables' that are to be         â”‚
  // â”‚ and are expected to be used by 'this' .svelte file / component.        â”‚
  // â”‚ IMPORTANT                                                              â”‚
  // â”‚ Please, structure the imports as follows:                              â”‚
  // â”‚ 1. export const / let [..]                                             â”‚
  // â”‚ 2. const [..]                                                          â”‚
  // â”‚ 3. let [..]                                                            â”‚
  // â”‚ 4. $: [..]                                                             â”‚
  // â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

  const
    /**
     * @description
     *  ğŸ“ `this` component **main** `id` and `data-testid` prefix.
     */ // eslint-disable-next-line no-unused-vars
    CNAME: string = 'content',
    /**
     * @description
     *  ğŸ“ threshold start + state for ğŸ“± MOBILE
     */ // eslint-disable-next-line no-unused-vars
    VIEWPORT_MOBILE_INIT: [number, boolean] = [575, true],
    /**
     * @description
     *  ğŸ“ threshold start + state for ğŸ’» TABLET
     */ // eslint-disable-next-line no-unused-vars
    VIEWPORT_TABLET_INIT: [number, boolean] = [1160, true]
  ;

  // â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
  // â”‚ ğŸ’  â”‚ STORES ACCESS                                                               â”‚
  // â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

  $: ({ windowWidth, globalState, serverLang } = $sessionStore);
  // $: ({ user } = $userBetarenaSettings);
  $: ({ user: { scores_user_data: { following: { tags } = {} } = {} } = {}, objHistory: { strContentSelectFeed } } = $userBetarenaSettings);
  $: [ VIEWPORT_MOBILE_INIT[1], VIEWPORT_TABLET_INIT[1] ]
    = viewportChangeV2
    (
      windowWidth,
      VIEWPORT_MOBILE_INIT[0],
      VIEWPORT_TABLET_INIT[0]
    )
  ;

  // â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
  // â”‚ ğŸ’  â”‚ WIDGET ACCESS                                                               â”‚
  // â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

  $: objPageDataWidget = $page.data as IPreloadResponse;

  // â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
  // â”‚ ğŸ’  â”‚ WIDGET VARIABLES                                                            â”‚
  // â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

  let
    // â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
    // â”‚ ğŸ’  â”‚ STANDARD VARIABLES                                                          â”‚
    // â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
    /**
     * @description
     * ğŸ“ `Map` where, `key=tagId` and `value=tagData`.
     */
    mapTagSelectData
      = new Map
        <
          'home' | 'forecast',
          ITagsWidgetData &
          {
            mapArticlesMod: Map < number, IArticle >;
            currentPage: number;
          }
        >(),
    /**
     * @description
     * ğŸ“ `List` data for `tag(s)`, ready for frontend consumption.
     */
    listFeedViews: IPageAuthorTagDataFinal['mapTag'][0][1][]
      = [
        { id: 0, name: 'Home' }
      ],

    // â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
    // â”‚ ğŸ’  â”‚ STATUS STATE                                                                â”‚
    // â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
    /**
     * @description
     * ğŸ“ State UI for `Loading Articles`.
     */
    isStateLoadingArticles = true
  ;

  /**
   * @description
   * ğŸ“ Interecpted data for `map` instance of `author(s)`.
   */
  $: mapAuthors = new Map
  (
    [
      ...(objPageDataWidget.objAuthorContentHome?.mapAuthor ?? []),
      ...(objPageDataWidget.objAuthorContentForecast?.mapAuthor ?? [])
    ]
  );
  /**
   * @description
   * ğŸ“ Interecpted data for `map` instance of `article(s)`.
   */
  $: mapArticles = new Map
  (
    [
      ...(objPageDataWidget.objAuthorContentHome?.mapArticle ?? []),
      ...(objPageDataWidget.objAuthorContentForecast?.mapArticle ?? [])
    ]
  );
  /**
   * @description
   * ğŸ“ Interecpted data for `map` instance of `tag(s)`.
   */
  $: mapTags = new Map
  (
    [
      ...(objPageDataWidget.objAuthorContentHome?.mapTag ?? []),
      ...(objPageDataWidget.objAuthorContentForecast?.mapTag ?? [])
    ]
  );

  $: if (objPageDataWidget.objAuthorContentForecast?.tagId && mapTags.size > 0 && listFeedViews.length === 1)
    listFeedViews.push(mapTags.get(objPageDataWidget.objAuthorContentForecast.tagId));
  ;

  $: if (browser)
  {
    helperReInitializeData
    (
      // @ts-expect-error :: <?>
      objPageDataWidget.objAuthorContentHome,
      'home'
    );
    helperReInitializeData
    (
      // @ts-expect-error :: <?>
      objPageDataWidget.objAuthorContentForecast,
      'forecast'
    );
  }

  // #endregion â¤ ğŸ“Œ VARIABLES

  // #region â¤ ğŸ› ï¸ METHODS

  // â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
  // â”‚ NOTE:                                                                  â”‚
  // â”‚ Please add inside 'this' region the 'methods' that are to be           â”‚
  // â”‚ and are expected to be used by 'this' .svelte file / component.        â”‚
  // â”‚ IMPORTANT                                                              â”‚
  // â”‚ Please, structure the imports as follows:                              â”‚
  // â”‚ 1. function (..)                                                       â”‚
  // â”‚ 2. async function (..)                                                 â”‚
  // â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

  /**
   * @author
   *  <-insert-author->
   * @summary
   *  ğŸŸ¦ HELPER
   * @description
   *  ğŸ“ Update data for 'content' page.
   * @param { ITagsWidgetData } objDataNew
   *  â—ï¸ **REQUIRED** New data instance.
   * @param { null | 'home' | 'forecast' } [_strStateSelectedFeed=null]
   *  â” **OPTIONAL** State selected feed.
   * @param { number } [intCurrentPage=0]
   *  â—ï¸ **OPTIONAL** Current page.
   * @returns { void }
   */
  function helperReInitializeData
  (
    objDataNew: ITagsWidgetData,
    _strStateSelectedFeed: null | 'home' | 'forecast' = null,
    intCurrentPage: number = 0
  ): void
  {
    _strStateSelectedFeed ??= strContentSelectFeed;

    // [ğŸ]
    dlogv2
    (
      'ğŸš checkpoint â¤ Article-Main.helperReInitializeData(..) // START',
      [
        // `ğŸ”¹ [var] â¤ objDataNew :: ${JSON.stringify(objDataNew)}`,
        `ğŸ”¹ [var] â¤ strContentSelectFeed :: ${strContentSelectFeed}`,
        `ğŸ”¹ [var] â¤ _strStateSelectedFeed :: ${_strStateSelectedFeed}`,
      ]
    );

    // â•­â”€â”€â”€â”€â”€
    // â”‚ NOTE:
    // â”‚ |: Inject 'new' data into `mapArticles`, `mapAuthors` and `mapTags`.
    // â•°â”€â”€â”€â”€â”€
    mapArticles = new Map([...mapArticles, ...objDataNew.mapArticle]);
    mapAuthors = new Map([...mapAuthors, ...objDataNew.mapAuthor]);
    mapTags = new Map([...mapTags, ...objDataNew.mapTag]);

    const
      /**
       * @description
       * ğŸ“ `Map` article generated from OLD data.
       */
      mapOldArticlesMod: Map < number, IArticle > = mapTagSelectData.get(_strStateSelectedFeed)?.mapArticlesMod ?? new Map(),
      /**
       * @description
       * ğŸ“ `Map` article generated from NEW data.
       */
      mapNewArticlesMod
        = prepareArticlesMap
        (
          new Map(objDataNew.mapArticle),
          new Map(objDataNew.mapTag),
          new Map(objDataNew.mapAuthor),
        )
    ;

    mapTagSelectData.set
    (
      _strStateSelectedFeed,
      {
        ...objDataNew,
        // â•­â”€â”€â”€â”€â”€
        // â”‚ NOTE: IMPORTANT
        // â”‚ |: Override properties
        // â•°â”€â”€â”€â”€â”€
        mapArticlesMod: new Map([...mapOldArticlesMod, ...mapNewArticlesMod]),
        currentPage: intCurrentPage,
        totalArticlesCount: objDataNew.totalArticlesCount,
      }
    );

    // â•­â”€â”€â”€â”€â”€
    // â”‚ NOTE: IMPORTANT
    // â”‚ |: Reinitialize `mapTagSelectData` with new data.
    // â•°â”€â”€â”€â”€â”€
    mapTagSelectData = mapTagSelectData;

    isStateLoadingArticles = false;

    // [ğŸ]
    log_v3
    (
      {
        strGroupName: 'ğŸš checkpoint â¤ Article-Main.helperReInitializeData(..) // END',
        msgs:
        [
          `ğŸ”¹ [var] â¤ mapTagSelectData.keys :: ${JSON.stringify([...mapTagSelectData.keys()])}`,
          `ğŸ”¹ [var] â¤ mapTagSelectData.size :: ${mapTagSelectData.size}`,
          `ğŸ”¹ [var] â¤ mapOldArticlesMod.size :: ${mapOldArticlesMod.size}`,
          `ğŸ”¹ [var] â¤ mapNewArticlesMod.size :: ${mapNewArticlesMod.size}`,
        ]
      }
    );

    return;
  }

  /**
   * @author
   *  <-insert-author->
   * @summary
   *  ğŸŸ¦ HELPER
   * @description
   *  ğŸ“ Selects target feed `tag`.
   * @return { void }
   */
  function helperSelectFeed
  (
  ): void
  {
    // [ğŸ]
    log_v3
    (
      {
        strGroupName: 'ğŸš checkpoint â¤ helperSelectFeed(..) // START',
        msgs:
        [
          `ğŸ”¹ [var] â¤ strContentSelectFeed :: ${strContentSelectFeed}`
        ]
      }
    );

    if (!mapTagSelectData.has(strContentSelectFeed))
      helperLoadTagArticles();
    ;

    // [ğŸ]
    log_v3
    (
      {
        strGroupName: 'ğŸš checkpoint â¤ helperSelectFeed(..) // END'
      }
    );

    return;
  }

  /**
   * @author
   *  <-insert-author->
   * @summary
   *  ğŸŸ¦ HELPER
   * @description
   *  ğŸ“ Check for instance of loading more articles.
   * @return { Promise < void > }
   */
  async function helperTryLoadMore
  (
  ): Promise < void >
  {
    // [ğŸ]
    log_v3
    (
      {
        strGroupName: 'ğŸš checkpoint â¤ helperTryLoadMore(..) // START',
      }
    );

    const
      /**
       * @description
       * ğŸ“ Selected 'tag' tab data.
       */
      objSelectedFeed = mapTagSelectData.get(strContentSelectFeed)
    ;

    if
    (
      !objSelectedFeed
      || ((objSelectedFeed.mapArticlesMod.size || 0) === objSelectedFeed.totalArticlesCount)
    ) return;

    await helperLoadTagArticles
    (
      (objSelectedFeed.currentPage + 1)
    );

    // [ğŸ]
    log_v3
    (
      {
        strGroupName: 'ğŸš checkpoint â¤ helperTryLoadMore(..) // END',
      }
    );

    return;
  }

  /**
   * @author
   *  <-insert-author->
   * @summary
   *  ğŸŸ¦ HELPER
   * @description
   *  ğŸ“ Load tag articles.
   * @param { number } [page=0]
   *  â” **OPTIONAL** Number page to request.
   * @return { Promise < void > }
   */
  async function helperLoadTagArticles
  (
    page: number = 0
  ): Promise < void >
  {
    // [ğŸ]
    dlogv2
    (
      'ğŸš checkpoint â¤ helperLoadTagArticles(..) // START',
      [
        `ğŸ”¹ [var] â¤ page :: ${page}`,
      ]
    );

    isStateLoadingArticles = true;

    let
      /**
       * @description
       * ğŸ“ URL to be requested.
       */
      url = `/api/data/author.home?&lang=${serverLang}&page=${page}&type=${strContentSelectFeed}`
    ;

    if (tags?.length)
      url += `&followingTags=${tags.join(',')}`;
    ;

    const
      /**
       * @description
       * ğŸ“ Data Response (0).
       */
      dataRes0
        = await get
        (
          url
        )!
    ;

    helperReInitializeData
    (
      // @ts-expect-error :: <?>
      dataRes0,
      null,
      page
    );

    // [ğŸ]
    log_v3
    (
      {
        strGroupName: 'ğŸš checkpoint â¤ Article-Main.helperLoadTagArticles(..) // END',
      }
    );

    return;
  }

  // #endregion â¤ ğŸ› ï¸ METHODS

</script>

<!--
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ ğŸ’  Svelte Component HTML                                                         â”‚
â”£â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”«
â”‚ â¤ HINT: â”‚ Use 'Ctrl + Space' to autocomplete global class=styles, dynamically    â”‚
â”‚         â”‚ imported from './static/app.css'                                       â”‚
â”‚ â¤ HINT: â”‚ access custom Betarena Scores VScode Snippets by typing emmet-like     â”‚
â”‚         â”‚ abbrev.                                                                â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
-->

<svelte:window
  on:scroll=
  {
    () =>
    {
      if (!globalState.has('IsPWA') && (VIEWPORT_MOBILE_INIT[1] || VIEWPORT_TABLET_INIT[1]))
        return;
      ;

      if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 5)
        helperTryLoadMore();
      ;

      return;
    }
  }
/>

<!--
â•­â”€â”€â”€â”€â”€
â”‚ > INSERT-DESCRIPTION
â•°â”€â”€â”€â”€â”€
-->
<div
  class="tabbar-wrapper"
  style=
  "
  {
    VIEWPORT_MOBILE_INIT[1]
      ? 'width: 100% !important;'
      : ''
  }
  "
>
  {#if listFeedViews.length}
    <!--
    â•­â”€â”€â”€â”€â”€
    â”‚ NOTE:
    â”‚ |:
    â•°â”€â”€â”€â”€â”€
    -->
    {#each listFeedViews as item}
      <Button
        full={true}
        type="tertiary-v2"
        classname=
        "
        {
          strContentSelectFeed === (item.id === 0 ? 'home' : 'forecast')
            ? 'selected'
            : ''
        }
        "
        style=
        "
        height: 36px;
        "
        on:click=
        {
          () =>
          {
            strContentSelectFeed
              = item.id === 0
                ? 'home'
                : 'forecast'
            ;
            userBetarenaSettings.updateData
            (
              [
                ['history-preference-articles-content-feed', strContentSelectFeed]
              ]
            );
            helperSelectFeed();
            return;
          }
        }
      >
        {#if item.id === 0 && globalState.has('Authenticated')}
        <!-- {#if item.id === 0 && user} -->
          {objPageDataWidget.objGeneralHomeTranslation?.translation?.for_you ?? 'For you'}
        {:else if item.id === 0 && globalState.has('NotAuthenticated')}
        <!-- {#if item.id === 0} -->
          {objPageDataWidget.objGeneralHomeTranslation?.translation?.home ?? 'Home'}
        {:else}
          {item.name}
        {/if}
      </Button>
    {/each}
  {/if}
</div>

<!--
â•­â”€â”€â”€â”€â”€
â”‚ > INSERT-DESCRIPTION
â•°â”€â”€â”€â”€â”€
-->
<div
  class="content"
>
  <div
    class="listArticlesMod"
  >
    {#each [...(mapTagSelectData.get(strContentSelectFeed)?.mapArticlesMod.entries() ?? [])] as [id,article] (id)}
      <ArticleCard
        mobile={VIEWPORT_MOBILE_INIT[1]}
        tablet={VIEWPORT_TABLET_INIT[1]}
        {article}
      />
    {/each}

    {#if isStateLoadingArticles}
      {#each { length: 10 } as _}
        <ArticleLoader
          mobile={VIEWPORT_MOBILE_INIT[1]}
          tablet={VIEWPORT_TABLET_INIT[1]}
        />
      {/each}
    {/if}
  </div>

  {#if
    (VIEWPORT_TABLET_INIT[1] || VIEWPORT_MOBILE_INIT[1])
    && !globalState.has('IsPWA')
    && (mapTagSelectData.get(strContentSelectFeed)?.mapArticlesMod ?? new Map).size
  }
    <div class="load-more">
      <Button type="outline" on:click={helperTryLoadMore}>Load More</Button>
    </div>
  {/if}
</div>
