<!-- Based on template :: Svelte-Boilerplate.v6.Widget.svelte -->

<!--
‚ñì‚ñì ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì
‚ñì‚ñì COMPONENT JS (w/ TS)                                                                 ‚ñì‚ñì
‚ñì‚ñì NOTE:                                                                                ‚ñì‚ñì
‚ñì‚ñì access custom Betarena Scores JS VScode Snippets by typing 'script...'               ‚ñì‚ñì
‚ñì‚ñì ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì
-->

<script lang="ts">

  // #region ‚û§ üì¶ Package Imports

  // ‚ñì‚ñì ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì
  // ‚ñì‚ñì NOTE:                                                           ‚ñì‚ñì
  // ‚ñì‚ñì Please add inside 'this' region the 'imports' that are required ‚ñì‚ñì
  // ‚ñì‚ñì by 'this' .svelte file is ran.                                  ‚ñì‚ñì
  // ‚ñì‚ñì IMPORTANT                                                       ‚ñì‚ñì
  // ‚ñì‚ñì Please, structure the imports as follows:                       ‚ñì‚ñì
  // ‚ñì‚ñì 1. svelte/sveltekit imports                                     ‚ñì‚ñì
  // ‚ñì‚ñì 2. project-internal files and logic                             ‚ñì‚ñì
  // ‚ñì‚ñì 3. component import(s)                                          ‚ñì‚ñì
  // ‚ñì‚ñì 4. assets import(s)                                             ‚ñì‚ñì
  // ‚ñì‚ñì 5. type(s) imports(s)                                           ‚ñì‚ñì
  // ‚ñì‚ñì ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì

	import { browser } from '$app/environment';
	import { page } from '$app/stores';
	import { onMount } from 'svelte';

	import { get } from '$lib/api/utils.js';

  import SeoBox from '$lib/components/SEO-Box.svelte';

	import type { B_SAP_FP_D } from '@betarena/scores-lib/types/seo-pages.js';
	import type { B_FIX_COMP_D, B_FIX_COMP_TS } from '@betarena/scores-lib/types/types.fixture.competition.js';

  // ‚ñì‚ñì NOTE: ‚ñì‚ñì WARNING:
  // ‚ñì‚ñì Disable, if Dynamic Import is Enabled.
  // import FeatBetSiteMain from './FeatBetSite-Main.svelte';

  // #endregion ‚û§ üì¶ Package Imports

  // #region ‚û§ üìå VARIABLES

  // ‚ñì‚ñì ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì
  // ‚ñì‚ñì NOTE:                                                           ‚ñì‚ñì
  // ‚ñì‚ñì Please add inside 'this' region the 'variables' that are to be  ‚ñì‚ñì
  // ‚ñì‚ñì and are expected to be used by 'this' .svelte file / component. ‚ñì‚ñì
  // ‚ñì‚ñì IMPORTANT                                                       ‚ñì‚ñì
  // ‚ñì‚ñì Please, structure the imports as follows:                       ‚ñì‚ñì
  // ‚ñì‚ñì 1. export const / let [..]                                      ‚ñì‚ñì
  // ‚ñì‚ñì 2. const [..]                                                   ‚ñì‚ñì
  // ‚ñì‚ñì 3. let [..]                                                     ‚ñì‚ñì
  // ‚ñì‚ñì 4. $: [..]                                                      ‚ñì‚ñì
  // ‚ñì‚ñì ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì

  const
    /** @description (widget) dynamic import variable condition */
    useDynamicImport: boolean = true
  ;

  let
    /** @description (widget) translations (+SEO) data */
    widgetDataTranslation: B_FIX_COMP_TS,
    /** @description (widget) main data */
    widgetDataMain: B_FIX_COMP_D,
    /** @description (widget) wether widget has or no data */
    widgetNoData: boolean = true,
    /** @description (widget) dynamic import variable for svelte component [1] */
    MainMainAsDynamic: any,
    /** @description (misc) available global page data */
    miscFixturePageData: B_SAP_FP_D = $page.data.FIXTURE_INFO
  ;

  $: widgetDataTranslation = $page.data?.B_FIX_COMP_TS;
  // $: WIDGET_TITLE = widgetDataTranslation?.translations?.widget_title ?? translationObject?.featured_bet_site;

  // #endregion ‚û§ üìå VARIABLES

  // #region ‚û§ üõ†Ô∏è METHODS

  // ‚ñì‚ñì ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì
  // ‚ñì‚ñì NOTE:                                                           ‚ñì‚ñì
  // ‚ñì‚ñì Please add inside 'this' region the 'methods' that are to be    ‚ñì‚ñì
  // ‚ñì‚ñì and are expected to be used by 'this' .svelte file / component. ‚ñì‚ñì
  // ‚ñì‚ñì IMPORTANT                                                       ‚ñì‚ñì
  // ‚ñì‚ñì Please, structure the imports as follows:                       ‚ñì‚ñì
  // ‚ñì‚ñì 1. function (..)                                                ‚ñì‚ñì
  // ‚ñì‚ñì 2. async function (..)                                          ‚ñì‚ñì
  // ‚ñì‚ñì ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì

  /**
   * @author
   *  @migbash
   * @summary
   *  üü© MAIN
   * @description
   *  üìå main widget data loader
   *  - ‚ö°Ô∏è (and) try..catch (error) handler
   *  - ‚ö°Ô∏è (and) placeholder handler
   * @returns { Promise < void > }
   */
  async function widgetInit
  (
  ): Promise < void >
  {
    // ‚ñì‚ñì IMPORTANT
		if (!browser) return;

    // ‚ñì‚ñì NOTE:
    // ‚ñì‚ñì sometimes, the data/component is loaded too fast,
    // ‚ñì‚ñì so a buffer is added to slow down the pace and show the
    // ‚ñì‚ñì preloader to the user.
		// await sleep(3000);

    const response = await get
    (
      `/api/data/fixture/competition?fixtureId=${miscFixturePageData?.data?.id}&decompress`,
      null,
      true,
      true,
    ) as B_FIX_COMP_D;

    widgetDataMain = response;

    // ‚ñì‚ñì CHECK
    // ‚ñì‚ñì for conditions when 'this' widget should not be shown.
    const if_M_0: boolean =
      widgetDataMain == null
    ;
		if (if_M_0)
    {
      // dlog(`${LV2_W_H_TAG[0]} ‚ùå no data available!`);
			widgetNoData = true;
			return;
		}

    widgetNoData = false;

    return;
  }

  // #endregion ‚û§ üõ†Ô∏è METHODS

  // #region ‚û§ üîÑ LIFECYCLE [SVELTE]

  // ‚ñì‚ñì ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì
  // ‚ñì‚ñì NOTE:                                                           ‚ñì‚ñì
  // ‚ñì‚ñì Please add inside 'this' region the 'logic' that should run     ‚ñì‚ñì
  // ‚ñì‚ñì immediately and as part of the 'lifecycle' of svelteJs,         ‚ñì‚ñì
  // ‚ñì‚ñì as soon as 'this' .svelte file is ran.                          ‚ñì‚ñì
  // ‚ñì‚ñì ‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì

  onMount
  (
    async (
    ): Promise < void > =>
    {

      // ‚ñì‚ñì CHECK
      // ‚ñì‚ñì for loading widget dynamically.
      if (useDynamicImport)
      {
        MainMainAsDynamic = (await import('./Competition-Main.svelte')).default;
      }

	  }
  );

  // #endregion ‚û§ üîÑ LIFECYCLE [SVELTE]

</script>

<!--
‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì
‚ñì‚ñì COMPONENT HTML                                                                    ‚ñì‚ñì
‚ñì‚ñì NOTE:                                                                             ‚ñì‚ñì
‚ñì‚ñì use 'CTRL+SPACE' to autocomplete global class="" styles                           ‚ñì‚ñì
‚ñì‚ñì NOTE:                                                                             ‚ñì‚ñì
‚ñì‚ñì access custom Betarena Scores VScode Snippets by typing emmet-like abbrev.        ‚ñì‚ñì
‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì‚ñì
-->

<SeoBox>
  <!--
  SEO CONTENT GOES HERE
  -->
</SeoBox>

<!--
[üêû]
-->
<!-- <MainLoader /> -->

{#await widgetInit()}
  <!--
  ‚ñì‚ñì NOTE:
  ‚ñì‚ñì promise is pending
  -->
  <!-- <MainLoader /> -->

{:then data}
  <!--
  ‚ñì‚ñì NOTE:
  ‚ñì‚ñì promise was fulfilled
  -->

  {#if !widgetNoData}
    <!--
    ‚ñì‚ñì NOTE:
    ‚ñì‚ñì Dynamic Svelte Component Import [optional]
    ‚ñì‚ñì WARNING:
    ‚ñì‚ñì Disable (this), if Standard (below) Import is Enabled.
    -->
    <svelte:component
      this={MainMainAsDynamic}
      WIDGET_DATA={widgetDataMain}
    />
    <!--
      <FeatBetSiteMain
        B_FEATB_T={widgetDataTranslation}
      />
    -->
  {/if}

{:catch error}
  <!--
  ‚ñì‚ñì NOTE:
  ‚ñì‚ñì promise was rejected
  -->

{/await}