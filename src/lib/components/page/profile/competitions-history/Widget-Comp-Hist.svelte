<!--
‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
### COMPONENT JS (w/ TS)                                                               ‚óºÔ∏è
### NOTE:                                                                              ‚óºÔ∏è
### access custom Betarena Scores JS VScode Snippets by typing 'script...'             ‚óºÔ∏è
‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
-->

<script lang="ts">

  // #region ‚û§ üì¶ Package Imports

  // ### ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
  // ### NOTE:                                                            ‚óºÔ∏è
  // ### Please add inside 'this' region the 'imports' that are required  ‚óºÔ∏è
  // ### by 'this' .svelte file is ran.                                   ‚óºÔ∏è
  // ### IMPORTANT                                                        ‚óºÔ∏è
  // ### Please, structure the imports as follows:                        ‚óºÔ∏è
  // ### 1. svelte/sveltekit imports                                      ‚óºÔ∏è
  // ### 2. project-internal files and logic                              ‚óºÔ∏è
  // ### 3. component import(s)                                           ‚óºÔ∏è
  // ### 4. assets import(s)                                              ‚óºÔ∏è
  // ### 5. type(s) imports(s)                                            ‚óºÔ∏è
  // ### ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è

	import { browser } from '$app/environment';
	import { page } from '$app/stores';
	import { get } from '$lib/api/utils.js';

	import userBetarenaSettings from '$lib/store/user-settings.js';
	import { dlog } from '$lib/utils/debug.js';
	import { viewport_change } from '$lib/utils/platform-functions.js';
	import { PROF_U_competitionTitle } from '@betarena/scores-lib/dist/functions/v8/profile.main.js';
	import { onMount } from 'svelte';

	import WidgetTxHistLoader from './Widget-Comp-Hist-Loader.svelte';
	import WidgetTxHistRow from './Widget-Comp-Hist-Row.svelte';

	import icon_tx_hist from '../assets/menu-opt/tx-hist-selected.svg';

	import type { B_H_COMP_DATA } from '@betarena/scores-lib/types/_HASURA_.js';
	import type { B_PROF_D, B_PROF_T } from '@betarena/scores-lib/types/profile.js';

  // #endregion ‚û§ üì¶ Package Imports

  // #region ‚û§ üìå VARIABLES

  // ### ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
  // ### NOTE:                                                            ‚óºÔ∏è
  // ### Please add inside 'this' region the 'variables' that are to be   ‚óºÔ∏è
  // ### and are expected to be used by 'this' .svelte file / component.  ‚óºÔ∏è
  // ### ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è

  const
    VIEWPORT_TABLET_INIT = 912,
    VIEWPORT_MOBILE_INIT = 581,
    /**
     * @description
     * üìå `this` component **main** `id` and `data-testid` prefix.
    */
    CNAME = 'profile‚Æïw‚Æïcomp-hist'
  ;

	let
    isViewMobile: boolean = false,
    isViewTablet: boolean = false,
    RESPONSE_PROFILE_DATA: B_PROF_T,
    WIDGET_DATA: B_PROF_D,
    NO_WIDGET_DATA: boolean,
    isShowMore: boolean = true,
    // isShowCalendar: boolean = false,
    txHistList: B_H_COMP_DATA[] = [],
    txHistListLimit: number = 10
  ;

  $: RESPONSE_PROFILE_DATA = $page.data?.RESPONSE_PROFILE_DATA ?? { };

  // #endregion ‚û§ üìå VARIABLES

  // #region ‚û§ üõ†Ô∏è METHODS

  // ### NOTE:
  // ### Temporary, deciding where to 'put' widget data loader,
  // ### Either into the parent (+page.svelte), or make 'this' widget
  // ### into it's own component, with the V6 structure.
  async function widgetInit
  (
  ): Promise < B_PROF_D >
  {
    // ### IMPORTANT
    if (!browser) return;

		// await sleep(3000);

    const response: B_PROF_D = await get
    (
			`/api/data/profile.main?uid=${$userBetarenaSettings?.user?.firebase_user_data?.uid}`
		);

    WIDGET_DATA = response

    const if_0 =
      WIDGET_DATA == undefined
    ;
		if (if_0)
    {
      // dlog(`${IN_W_F_TAG} ‚ùå no data available!`, IN_W_F_TOG, IN_W_F_STY);
			NO_WIDGET_DATA = true;
			return;
		}

    NO_WIDGET_DATA = false;
    return WIDGET_DATA
  }

  /**
   * @description
   * TODO: DOC:
   */
  function showMoreToggle
  (
  ): void
  {
    // ### [üêû]
    dlog
    (
      `üöè checkpoint ‚û§ showMoreToggle`,
      true
    );

    txHistListLimit =
      txHistListLimit + 10 > WIDGET_DATA?.competitions?.length
        ? WIDGET_DATA?.competitions?.length
        : txHistListLimit + 10
    ;
    isShowMore =
      txHistListLimit + 10 > WIDGET_DATA?.competitions?.length
        ? false
        : true
    ;
  }

  /**
   * IMPORTANT
   * @description
   * TODO: DOC:
   */
  function resizeAction
  (
  ): void
  {
    [
      isViewTablet,
      isViewMobile
    ] =	viewport_change
    (
      VIEWPORT_TABLET_INIT,
      VIEWPORT_MOBILE_INIT
    );
  }

  /**
   * @summary
   * [MAIN]
   * @description
   * ‚û® document (visibility-change) event listener;
   * @returns
   * void
   */
  function addEventListeners
  (
  ): void
  {
    // NOTE: (on-resize)
    window.addEventListener
    (
			'resize',
			function ()
      {
				resizeAction();
			}
		);
  }

  // #endregion ‚û§ üõ†Ô∏è METHODS

  // #region ‚û§ üîÑ LIFECYCLE [SVELTE]

  // ### ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
  // ### NOTE:                                                            ‚óºÔ∏è
  // ### Please add inside 'this' region the 'logic' that should run      ‚óºÔ∏è
  // ### immediately and as part of the 'lifecycle' of svelteJs,          ‚óºÔ∏è
  // ### as soon as 'this' .svelte file is ran.                           ‚óºÔ∏è
  // ### ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è

  /**
   * @summary
   * [MAIN] [LIFECYCLE]
   * @description
   * ‚û® kickstart resize-action;
   * ‚û® kickstart (bundle) event-listeners;
  */
  onMount
  (
    async() =>
    {
      resizeAction();
      addEventListeners();
    }
  );

  // #endregion ‚û§ üîÑ LIFECYCLE [SVELTE]

</script>

<!--
‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
### COMPONENT HTML                                                                     ‚óºÔ∏è
### NOTE:                                                                              ‚óºÔ∏è
### use 'CTRL+SPACE' to autocomplete global class="" styles                            ‚óºÔ∏è
### NOTE:                                                                              ‚óºÔ∏è
### access custom Betarena Scores VScode Snippets by typing emmet-like abbrev.         ‚óºÔ∏è
‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
-->

<!-- <WidgetTxHistLoader /> -->

{#await widgetInit()}

  <WidgetTxHistLoader />

{:then value}

  <div
    id="{CNAME}‚Æïmain"
    data-testid="{CNAME}‚Æïmain"
    class:dark-background-1={$userBetarenaSettings.theme == 'Dark'}
  >

    <!--
    NO WIDGET DATA
    -->
    {#if WIDGET_DATA?.competitions?.length == 0}

      <!--
      WIDGET TITLE
      -->
      <h2
        class="
          w-500
          s-20
          m-b-24
          color-black-2
        "
        style="margin-top: 0px;"
      >
        {RESPONSE_PROFILE_DATA?.competition_hist?.title ?? 'Competition History'}
      </h2>

      <!--
      NO COMPETITIONS FOUND
      -->
      <div
        id="{CNAME}‚Æïmain‚Æïno-widget-data‚Æïcontent-box"
        data-testid="{CNAME}‚Æïmain‚Æïno-widget-data‚Æïcontent-box"
      >
        <div
          id="{CNAME}‚Æïmain‚Æïno-widget-data‚Æïcontent"
          data-testid="{CNAME}‚Æïmain‚Æïno-widget-data‚Æïcontent"
          class=
          "
          text-center
          "
        >
          <img
            src={icon_tx_hist}
            alt="icon_tx_hist"
            width=40
            height=40
            class=
            "
            m-b-20
            "
          >
          <p
            class=
            "
            s-16
            color-black-2
            w-500
            m-b-8
            "
          >
            {`You have not taken part in any Competitions yet`}
          </p>
          <p
            class=
            "
            s-14
            color-grey
            "
          >
            Here you will be able to see your transaction history,
            <br/>
            deposits and withdrawal requests.
          </p>
        </div>
      </div>

    {/if}

    <!--
    MAIN WIDGET DATA
    -->
    {#if WIDGET_DATA?.competitions?.length > 0}

      <!--
      TOP WIGET ROW
      -->
      <div
        class:row-space-out-top={!isViewMobile}
        class:column-space-start={isViewMobile}
      >

        <!--
        1st COLUMN
        -->
        <div
          class:m-b-16={isViewMobile}
        >

          <!--
          WIDGET TITLE
          -->
          <h2
            class=
            "
            w-500
            s-20
            m-b-24
            color-black-2
            "
            style="margin-top: 0px;"
          >
            {RESPONSE_PROFILE_DATA?.competition_hist?.title ?? 'Competition History'}
          </h2>

          <!--
          WIDGET DESCRIPTION
          -->
          <div
            id="{CNAME}‚Æïmain‚Æïdesc-box"
            data-testid="{CNAME}‚Æïmain‚Æïdesc-box"
            class=
            "
            m-b-16
            "
          >
            <p
              class=
              "
              m-t-5
              s-14
              color-grey
              "
            >
              {RESPONSE_PROFILE_DATA?.competition_hist?.description ?? ''}
            </p>
          </div>

        </div>

      </div>

      <!--
      USER TRANSACTION HISTORY TABLE
      [+] PLAYWRIGHT TESTED
      -->
      <div
        id="{CNAME}‚Æïmain‚Æïtable-outline"
        data-testid="{CNAME}‚Æïmain‚Æïtable-outline"
        class=
        "
        m-b-16
        "
      >

        <table
          id="{CNAME}‚Æïmain‚Æïtable"
          data-testid="{CNAME}‚Æïmain‚Æïtable"
        >
          <thead>
            <tr
            >
              <!--
              COMPETITION ‚û§ (COLUMN) ‚û§ ID
              -->
              <th
                id="col-tx-id"
                data-testid="col-tx-id"
              >
                <p>
                  {RESPONSE_PROFILE_DATA?.competition_hist?.header?.id ?? 'ID'}
                </p>
              </th>

              <!--
              COMPETITION ‚û§ (COLUMN) ‚û§ SPORT / DATE
              -->
              <th
                id="col-tx-date-address"
                data-testid="col-tx-date-address"
              >
                <p>
                  {RESPONSE_PROFILE_DATA?.competition_hist?.header?.sport ?? 'Sport / Date'}
                </p>
              </th>

              <!--
              üíª TABLET + üñ•Ô∏è LAPTOP
              -->
              {#if !isViewMobile}

                <!--
                COMPETITION ‚û§ (COLUMN) ‚û§ CONTEST TITLE / STYLE
                -->
                <th
                  id="col-tx-date"
                  data-testid="col-tx-date"
                >
                  <p>
                    {RESPONSE_PROFILE_DATA?.competition_hist?.header?.contest_title ?? 'Contest Title / Style'}
                  </p>
                </th>

                <!--
                COMPETITION ‚û§ (COLUMN) ‚û§ ENTRY FEE
                -->
                <th
                  id="col-tx-type"
                  data-testid="col-tx-type"
                >
                  <p>
                    {RESPONSE_PROFILE_DATA?.competition_hist?.header?.entry_fee ?? 'Entry Fee'}
                  </p>
                </th>

              {/if}

              <!--
              üñ•Ô∏è LAPTOP
              -->
              {#if !isViewMobile && !isViewTablet}

                <!--
                COMPETITION ‚û§ (COLUMN) ‚û§ TOTAL PRIZES
                -->
                <th
                  id="col-tx-asset"
                  data-testid="col-tx-asset"
                >
                  <p>
                    {RESPONSE_PROFILE_DATA?.competition_hist?.header?.total_prize ?? 'Total Prizes'}
                  </p>
                </th>

                <!--
                COMPETITION ‚û§ (COLUMN) ‚û§ POTENTIAL WIN
                -->
                <th
                  id="col-tx-gateway"
                  data-testid="col-tx-gateway"
                >
                  <p>
                    {RESPONSE_PROFILE_DATA?.competition_hist?.header?.potential_win ?? 'Potential Win'}
                  </p>
                </th>

                <!--
                COMPETITION ‚û§ (COLUMN) ‚û§ FORECAST
                -->
                <th
                  id="col-tx-bta"
                  data-testid="col-tx-bta"
                >
                  <p>
                    {RESPONSE_PROFILE_DATA?.competition_hist?.header?.forecast ?? 'Forecast'}
                  </p>
                </th>

                <!--
                COMPETITION ‚û§ (COLUMN) ‚û§ RESULT
                -->
                <th
                  id="col-tx-fee"
                  data-testid="col-tx-fee"
                >
                  <p>
                    {RESPONSE_PROFILE_DATA?.competition_hist?.header?.result ?? 'Result'}
                  </p>
                </th>

                <!--
                COMPETITION ‚û§ (COLUMN) ‚û§ PRIZE WON
                -->
                <th
                  id="col-tx-wallet"
                  data-testid="col-tx-wallet"
                >
                  <p>
                    {RESPONSE_PROFILE_DATA?.competition_hist?.header?.prize ?? 'Prize Won'}
                  </p>
                </th>

              {/if}

              <!--
              üíª TABLET
              -->
              {#if !isViewMobile && isViewTablet}

                <!--
                COMPETITION ‚û§ (COLUMN) ‚û§ POTENTIAL WIN / PRIZE WON
                -->
                <th
                  id="col-tx-gateway"
                  data-testid="col-tx-gateway"
                >
                  <p>
                    {RESPONSE_PROFILE_DATA?.competition_hist?.header?.potential_win ?? 'Potential Win'}
                    /
                    {RESPONSE_PROFILE_DATA?.competition_hist?.header?.prize ?? 'Prize Won'}
                  </p>
                </th>

              {/if}

              <!--
              üíª TABLET + üñ•Ô∏è LAPTOP
              COMPETITION ‚û§ (COLUMN) ‚û§ STATUS (END)
              -->
              {#if !isViewMobile}

                <th
                  id="col-tx-status"
                  data-testid="col-tx-status"
                  class=
                  "
                  text-right
                  "
                  >
                  <p>
                    {RESPONSE_PROFILE_DATA?.competition_hist?.header?.status ?? 'Status'}
                  </p>
                </th>

              {/if}

              <!--
              üì± MOBILE
              COMPETITION ‚û§ (COLUMN) ‚û§ PRIZE WON (END)
              -->
              {#if isViewMobile}

                <th
                  id="col-tx-status"
                  data-testid="col-tx-status"
                  class=
                  "
                  text-right
                  "
                >
                  <p>
                    {RESPONSE_PROFILE_DATA?.competition_hist?.header?.prize ?? 'Prize Won'}
                  </p>
                </th>
              {/if}

            </tr>
          </thead>

          <tbody>

            <!-- [üêû] -->

            <!-- {#each { length: 1 } as _}
              <WidgetTxHistRow
                tx_data={WIDGET_DATA?.competitions[0]}
                {isViewMobile}
                {isViewTablet}
                txTranslation={RESPONSE_PROFILE_DATA?.tx?.fields}
                txStatusTrans={RESPONSE_PROFILE_DATA?.tx?.status}
              />
            {/each} -->

            {#each WIDGET_DATA?.competitions?.slice(0, txHistListLimit) ?? [] as item}
              <WidgetTxHistRow
                competitionObject={item}
                competitionTitle=
                {
                  PROF_U_competitionTitle
                  (
                    RESPONSE_PROFILE_DATA?.competition_general?.title
                    , item?.data?.target_team_name
                    , item?.data?.target_team_prediction_term
                    , RESPONSE_PROFILE_DATA?.competition_general?.prediction
                  )
                }
                {isViewMobile}
                {isViewTablet}
                translationObject={RESPONSE_PROFILE_DATA?.competition_hist}
                translationObject2={RESPONSE_PROFILE_DATA?.competition_general}
              />
            {/each}

          </tbody>
        </table>

        <!--
        SHOW MORE OPT
        -->
        {#if WIDGET_DATA?.competitions?.length > 10 && isShowMore}
          <div
            id="{CNAME}‚Æïmain‚Æïtable-show-more"
            data-testid="{CNAME}‚Æïmain‚Æïtable-show-more"
            class=
            "
            text-center
            cursor-pointer
            "
            on:click={() => showMoreToggle()}
          >
            <p
              class=
              "
              s-14
              w-500
              color-primary
              "
            >
              {RESPONSE_PROFILE_DATA?.tx?.show_more ?? 'Show more'}
            </p>
          </div>
        {/if}

        <!--
        CONTENT DIVIDER
        -->
        <div
          id="{CNAME}‚Æïdivider"
          data-testid="{CNAME}‚Æïmain‚Æïdivider"
          class:isMoreTx={WIDGET_DATA?.competitions?.length <= 10}
        />

      </div>

      <!--
      COMPETITION > ADDITIONAL NOTE
      -->
      <div
        id="{CNAME}‚Æïadd-info"
        data-testid="{CNAME}‚Æïadd-info"
        class=
        "
        m-b-12
        s-12
        global
        color-grey
        "
      >
        {@html RESPONSE_PROFILE_DATA?.competition_hist?.description_2 ?? ''}
      </div>

    {/if}

  </div>

{:catch error}
  <!-- NaN -->
{/await}

<!--
‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
### COMPONENT STYLE                                                                    ‚óºÔ∏è
### NOTE:                                                                              ‚óºÔ∏è
### auto-fill/auto-complete iniside <style> for var() values by typing/CTRL+SPACE      ‚óºÔ∏è
### NOTE:                                                                              ‚óºÔ∏è
### access custom Betarena Scores CSS VScode Snippets by typing 'style...'             ‚óºÔ∏è
‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
-->

<style>

	div#profile‚Æïw‚Æïcomp-hist‚Æïmain
  {
    /* üé® style */
		padding: 20px;
		background: #ffffff;
		box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.08);
		border-radius: 12px;
	}

  div#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïno-widget-data‚Æïcontent-box
  {
    /* üìå position */
    position: relative;
    /* üõù layout */
    height: 362px;
  }
  div#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïno-widget-data‚Æïcontent
  {
    /* üìå position */
    position: absolute;
		right: 0;
		left: 0;
		top: 0;
		bottom: 0;
    /* üõù layout */
		margin: auto;
		width: fit-content;
		height: fit-content;
  }

  table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable
  {
    /* üé® style */
    text-align: left;
		border-collapse: collapse;
    width: -webkit-fill-available;
    width: -moz-available;
  }
  table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable thead tr
  {
    /* üé® style */
    border-radius: 2px;
    background: var(--whitev2);
  }
  table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable thead tr th
  {
    /* üõù layout */
    width: fit-content;
    /* üé® style */
    white-space: nowrap;
    padding-right: 12px;
  }
  table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable thead tr th#col-tx-id
  {
    /* üé® style */
    min-width: 50px;
  }
  table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable thead tr th#col-tx-status
  {
    /* üé® style */
    min-width: 150px;
  }
  table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable thead tr th:first-child
  {
    /* üé® style */
    padding-left: 20px;
    border-radius: 2px 0 0 2px;
  }
  table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable thead tr th:last-child
  {
    /* üé® style */
    padding-right: 20px;
    border-radius: 0 2px 2px 0;
  }
  table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable thead tr th p
  {
    /* üõù layout */
    width: fit-content;
    /* üé® style */
    color: var(--semi-black-night, #A8A8A8);
    font-family: Roboto;
    font-size: 12px;
    font-style: normal;
    font-weight: 400;
    line-height: 150%;
    padding: 3px 0 3px 0;
  }
  :global(table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable tbody tr:nth-child(odd))
  {
    /* üé® style */
    background-color: var(--white);
  }
  :global(table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable tbody tr:nth-child(even))
  {
    /* üé® style */
    background-color: var(--whitev2)
  }

  div#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable-show-more
  {
    /* üé® style */
    padding: 18px 0 18px 0;
  }

  div#profile‚Æïw‚Æïcomp-hist‚Æïdivider
  {
    /* üé® style */
    border-bottom: 1px solid var(--grey-color);
  }
  div#profile‚Æïw‚Æïcomp-hist‚Æïdivider.isMoreTx
  {
    /* üé® style */
    padding: 18px 0 18px 0;
  }

  /*
  ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
  ‚óºÔ∏è ‚ö°Ô∏è RESPONSIVNESS      ‚óºÔ∏è
  ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
  */

  @media only screen
  and (min-width: 581px)
  {
    table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable thead tr th:first-child,
    :global(table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable tbody tr td:first-child)
    {
      /* üé® style */
      padding-left: 12px !important;
    }
    table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable thead tr th:last-child,
    :global(table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable tbody tr td:last-child)
    {
      /* üé® style */
      padding-right: 12px !important;
    }
  }

  @media only screen
  and (min-width: 912px)
  {
    table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable thead tr th#col-tx-id
    {
      /* üé® style */
      padding-right: 20px;
      min-width: 12px;
    }
    table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable thead tr th#col-tx-date
    {
      /* üé® style */
      padding-right: 20px;
      min-width: 90px;
    }
    table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable thead tr th#col-tx-status
    {
      /* üé® style */
      min-width: 105px;
    }
  }

  /*
  ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
  ‚óºÔ∏è üåí DARK-THEME         ‚óºÔ∏è
  ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
  */

  div#profile‚Æïw‚Æïcomp-hist‚Æïmain.dark-background-1 table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable thead tr
  {
    /* üé® style */
    background: var(--dark-theme-1-shade) !important;
  }

  div#profile‚Æïw‚Æïcomp-hist‚Æïmain.dark-background-1 :global(table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable tbody tr:nth-child(odd))
  {
    /* üé® style */
    background-color: var(--dark-theme-1) !important;
  }
  div#profile‚Æïw‚Æïcomp-hist‚Æïmain.dark-background-1 :global(table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable tbody tr:nth-child(even))
  {
    /* üé® style */
    background-color: var(--dark-theme-1-shade) !important;
  }

  div#profile‚Æïw‚Æïcomp-hist‚Æïmain.dark-background-1 :global(table#profile‚Æïw‚Æïcomp-hist‚Æïmain‚Æïtable tbody tr td p)
  {
    /* style */
    color: var(--white);
  }

  div#profile‚Æïw‚Æïcomp-hist‚Æïmain.dark-background-1 div#profile‚Æïw‚Æïcomp-hist‚Æïdivider
  {
    /* üé® style */
    border-bottom: 1px solid var(--dark-theme-1-shade);
  }

</style>