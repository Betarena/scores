<!--
‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
### COMPONENT JS (w/ TS)                                                               ‚óºÔ∏è
### NOTE:                                                                              ‚óºÔ∏è
### access custom Betarena Scores JS VScode Snippets by typing 'script...'             ‚óºÔ∏è
‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
-->

<script lang="ts">

  // #region ‚û§ üì¶ Package Imports

  // ### ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
  // ### NOTE:                                                            ‚óºÔ∏è
  // ### Please add inside 'this' region the 'imports' that are required  ‚óºÔ∏è
  // ### by 'this' .svelte file is ran.                                   ‚óºÔ∏è
  // ### IMPORTANT                                                        ‚óºÔ∏è
  // ### Please, structure the imports as follows:                        ‚óºÔ∏è
  // ### 1. svelte/sveltekit imports                                      ‚óºÔ∏è
  // ### 2. project-internal files and logic                              ‚óºÔ∏è
  // ### 3. component import(s)                                           ‚óºÔ∏è
  // ### 4. assets import(s)                                              ‚óºÔ∏è
  // ### 5. type(s) imports(s)                                            ‚óºÔ∏è
  // ### ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è

  import { onDestroy, onMount } from 'svelte';

	import userBetarenaSettings from '$lib/store/user-settings.js';
	import { toCorrectDate, toZeroPrefixDateStr } from '$lib/utils/dates.js';
	import { toDecimalFix } from '$lib/utils/platform-functions.js';

	import type { B_H_INVEST_WIDGET_Data } from '@betarena/scores-lib/types/_HASURA_.js';
	import type { B_PROF_D } from '@betarena/scores-lib/types/profile.js';

  // #endregion ‚û§ üì¶ Package Imports

  // #region ‚û§ üìå VARIABLES

  // ### ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
  // ### NOTE:                                                            ‚óºÔ∏è
  // ### Please add inside 'this' region the 'variables' that are to be   ‚óºÔ∏è
  // ### and are expected to be used by 'this' .svelte file / component.  ‚óºÔ∏è
  // ### IMPORTANT                                                        ‚óºÔ∏è
  // ### Please, structure the imports as follows:                        ‚óºÔ∏è
  // ### 1. export const / let [..]                                       ‚óºÔ∏è
  // ### 2. const [..]                                                    ‚óºÔ∏è
  // ### 3. let [..]                                                      ‚óºÔ∏è
  // ### 4. $: [..]                                                       ‚óºÔ∏è
  // ### ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è

  export let
    /** @inheritdoc */
    WIDGET_DATA: B_PROF_D
  ;

  /**
   * @description
  */
  interface IRoundData
  {
    title: string;
    data:
    {
      row_title: string;
      value: string;
    }[]
  }

  type WidgetState = 'InviteOnly' | 'ToBeAnnounced' | 'Ready State' | 'CountdownWithDefinedDate' | 'In Progress' | 'CountdownToFinish' | 'Ended';

  const
    /** @description üìå `this` component **main** `id` and `data-testid` prefix. */
    CNAME = 'profile‚Æïw‚Æïinvestround‚Æïmain'
  ;

  let
    /** @description üì£ investor number difference */
    widgetState: WidgetState = 'ToBeAnnounced'
    /** @description üì£ investor number difference */
    , numDateDiffStart: number = 0
    /** @description üì£ investor number difference */
    , numDateDiffEnd: number = 0
    /** @description üì£ investor data (map) */
    , mapInvestorData: Map < string, B_H_INVEST_WIDGET_Data > = new Map
    (
      WIDGET_DATA?.investor
    ) as Map < string, B_H_INVEST_WIDGET_Data >
    /** @description TODO: */
    , roundData: IRoundData[] =
    [
      {
        title: 'Token Information'
        , data:
        [
          {
            row_title: 'Name'
            , value: mapInvestorData?.get('round')?.values?.name ?? '-'
          }
          , {
            row_title: 'Symbol'
            , value: mapInvestorData?.get('round')?.values?.symbol ?? '-'
          }
          , {
            row_title: 'Available'
            , value: mapInvestorData?.get('round')?.values?.available ?? '-'
          }
        ]
      }
      , {
        title: 'Pre-sale'
        , data:
        [
          {
            row_title: 'Start Date'
            , value: mapInvestorData?.get('round')?.values?.start_date ?? '-'
          }
          , {
            row_title: 'End Date'
            , value: mapInvestorData?.get('round')?.values?.end_date ?? '-'
          }
        ]
      }
      , {
        title: 'Investment Details'
        , data:
        [
          {
            row_title: 'Minimum Buy Amount'
            , value: mapInvestorData?.get('round')?.values?.min_buy ?? '-'
          }
          , {
            row_title: 'Raising Platform'
            , value: mapInvestorData?.get('round')?.values?.chain ?? '-'
          }
          , {
            row_title: 'Type'
            , value: mapInvestorData?.get('round')?.values?.type ?? '-'
          }
          , {
            row_title: 'Accepted Currencies'
            , value: mapInvestorData?.get('round')?.values?.currencies ?? '-'
          }
        ]
      }
    ]
    /** @description TODO: */
	  , datePercentageDiff: number = 0
    /** @description TODO: `mapInvestorData?.get('round')?.values?.start_date` || 12/08/2023 */
    , dateRoundStart = mapInvestorData?.get('round')?.values?.start_date
    /** @description TODO: `mapInvestorData?.get('round')?.values?.end_date` || 12/08/2023  */
    , dateRoundEnd = mapInvestorData?.get('round')?.values?.end_date
    /** @description interval for `countdown` */
    , interval1: NodeJS.Timer
  ;

  $: countDownSecToStart = toZeroPrefixDateStr(Math.floor((numDateDiffStart / 1000) % 60).toString());
	$: countDownMinToStart = toZeroPrefixDateStr(Math.floor((numDateDiffStart / 1000 / 60) % 60).toString());
	$: countDownHourToStart = toZeroPrefixDateStr(Math.floor((numDateDiffStart / (1000 * 60 * 60)) % 24).toString());
	$: countDownTestHourToStart = Math.floor(numDateDiffStart / (1000 * 60 * 60));

  $: countDownSecToEnd = toZeroPrefixDateStr(Math.floor((numDateDiffEnd / 1000) % 60).toString());
	$: countDownMinToEnd = toZeroPrefixDateStr(Math.floor((numDateDiffEnd / 1000 / 60) % 60).toString());
	$: countDownHourToEnd = toZeroPrefixDateStr(Math.floor((numDateDiffEnd / (1000 * 60 * 60)) % 24).toString());
	$: countDownTestHourToEnd = Math.floor(numDateDiffEnd / (1000 * 60 * 60));

  // #endregion ‚û§ üìå VARIABLES

  // #region ‚û§ üî• REACTIVIY [SVELTE]

  // ### ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
  // ### NOTE:                                                            ‚óºÔ∏è
  // ### Please add inside 'this' region the 'logic' that should run      ‚óºÔ∏è
  // ### immediately and/or reactively for 'this' .svelte file is ran.    ‚óºÔ∏è
  // ### WARNING:                                                         ‚óºÔ∏è
  // ### ‚ùóÔ∏è Can go out of control.                                        ‚óºÔ∏è
  // ### (a.k.a cause infinite loops and/or cause bottlenecks).           ‚óºÔ∏è
  // ### Please keep very close attention to these methods and            ‚óºÔ∏è
  // ### use them carefully.                                              ‚óºÔ∏è
  // ### ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è

  /**
   * @summary
   * üî• REACTIVITY
   *
   * @description
   *  üì£ looming `start-date` check
   *
   * WARNING:
   * triggered by changes in:
   * - `numDateDiffStart`
   * - `countDownTestHourToStart`
   */
  $: if_R_000 =
    numDateDiffStart == null
    || numDateDiffEnd == null
  $: if_R_0 =
    countDownTestHourToStart <= 23
    && countDownTestHourToStart >= 0
    && numDateDiffStart > 0
  ;
  $: if_R_1 =
    countDownTestHourToEnd <= 23
    && countDownTestHourToEnd >= 0
    && numDateDiffEnd > 0
  ;
  $: if_R_3=
    countDownTestHourToEnd < 23
    && numDateDiffEnd < 0
  ;
	$:
  if (if_R_000) widgetState = 'ToBeAnnounced'
	else if (if_R_0) widgetState = 'CountdownWithDefinedDate';
	else if (if_R_1) widgetState = 'CountdownToFinish';
  else if (if_R_3) widgetState = 'Ended';

  // $: console.log('countDownTestHourToStart', countDownTestHourToStart)
  // $: console.log('countDownTestHourToEnd', countDownTestHourToEnd)
  // $: console.log('widgetState', widgetState)

  // #endregion ‚û§ üî• REACTIVIY [SVELTE]

  // #region ‚û§ üîÑ LIFECYCLE [SVELTE]

  // ### ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
  // ### NOTE:                                                            ‚óºÔ∏è
  // ### Please add inside 'this' region the 'logic' that should run      ‚óºÔ∏è
  // ### immediately and as part of the 'lifecycle' of svelteJs,          ‚óºÔ∏è
  // ### as soon as 'this' .svelte file is ran.                           ‚óºÔ∏è
  // ### ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è

  onMount
  (
    async (
    ): Promise < void > =>
    {
      // NOTE: accepts '12/9/2023' <=> MM/dd/YYYY
      numDateDiffStart = toCorrectDate(dateRoundStart, false).getTime() - new Date().getTime();
      numDateDiffEnd = toCorrectDate(dateRoundEnd, false).getTime() - new Date().getTime();

      const
        // @ts-ignore
        dateRoundDiff = Math.floor((toCorrectDate(dateRoundEnd, false).getTime() - toCorrectDate(dateRoundStart, false).getTime()) / 86400000)
        // @ts-ignore
        , dateDeltaDiffDays = Math.floor((toCorrectDate(dateRoundEnd, false).getTime() - new Date().getTime()) / 86400000)
      ;

      datePercentageDiff = 100 - (dateDeltaDiffDays / dateRoundDiff) * 100;
      if (datePercentageDiff > 100) datePercentageDiff = 100;
      if (isNaN(datePercentageDiff)) datePercentageDiff = 0;

      interval1 = setInterval
      (
        () =>
        {
          numDateDiffStart = toCorrectDate(dateRoundStart, false).getTime() - new Date().getTime();
          numDateDiffEnd = toCorrectDate(dateRoundEnd, false).getTime() - new Date().getTime();

          const
            // @ts-ignore
            dateRoundDiff = Math.floor((toCorrectDate(dateRoundEnd, false).getTime() - toCorrectDate(dateRoundStart, false).getTime()) / 86400000)
            // @ts-ignore
            , dateDeltaDiffDays = Math.floor((toCorrectDate(dateRoundEnd, false).getTime() - new Date().getTime()) / 86400000)
          ;

          datePercentageDiff = 100 - (dateDeltaDiffDays / dateRoundDiff) * 100;
          if (datePercentageDiff > 100) datePercentageDiff = 100
          if (isNaN(datePercentageDiff)) datePercentageDiff = 0;
        },
        1000
      );

      return;
    }
  );

  onDestroy
  (
    () =>
    {
      // @ts-expect-error
      clearInterval(interval1);
    }
  );

  // #endregion ‚û§ üîÑ LIFECYCLE [SVELTE]

</script>

<!--
‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
### COMPONENT HTML                                                                     ‚óºÔ∏è
### NOTE:                                                                              ‚óºÔ∏è
### use 'CTRL+SPACE' to autocomplete global class=styles                               ‚óºÔ∏è
### NOTE:                                                                              ‚óºÔ∏è
### access custom Betarena Scores VScode Snippets by typing emmet-like abbrev.         ‚óºÔ∏è
‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
-->

<div
  id="{CNAME}"
  class:dark-background-1={$userBetarenaSettings.theme == 'Dark'}
>

  <!--
  ‚ñì NOTE:
  ‚ñì > top box (parent)
  -->
  <div
    id="{CNAME}‚Æïtop-row"
    class=
    "
    row-space-out
    "
  >

    <!--
    ‚ñì NOTE:
    ‚ñì > round data
    -->
    <div>

      <!--
      ‚ñì NOTE:
      ‚ñì > round number
      -->
      <p
        class=
        "
        s-24
        color-black-2
        w-500
        "
      >
        {'Round 1'}
      </p>

      <!--
      ‚ñì NOTE:
      ‚ñì > presale text
      -->
      {#if ['ToBeAnnounced', 'CountdownWithDefinedDate', 'CountdownToFinish'].includes(widgetState)}
        <span
          class=
          "
          s-14
          color-grey
          w-400
          m-t-5
          "
        >
          {#if widgetState == 'CountdownWithDefinedDate'}
            Presale starts in
          {:else}
            Presale ends in
          {/if}
        </span>
      {/if}

    </div>

    <!--
    ‚ñì NOTE:
    ‚ñì > countdown (parent)
    -->
    {#if ['CountdownWithDefinedDate', 'CountdownToFinish'].includes(widgetState)}

      <!--
      ‚ñì NOTE:
      ‚ñì > countdown (parent)
      -->
      <div
        id="countdown-box-parent"
      >

        <!--
        ‚ñì NOTE:
        ‚ñì > countdown (hours)
        -->
        <div
          class=
          "
          countdown-box-child
          "
        >
          <p
            class=
            "
            s-16
            w-500
            color-black-2
            "
          >
            {widgetState == 'CountdownWithDefinedDate' ? countDownHourToStart : countDownHourToEnd}h
          </p>
        </div>

        <!--
        ‚ñì NOTE:
        ‚ñì > countdown (minutes)
        -->
        <div
          class=
          "
          countdown-box-child
          "
        >
          <p
            class=
            "
            s-16
            w-500
            color-black-2
            "
          >
            {widgetState == 'CountdownWithDefinedDate' ? countDownMinToStart : countDownMinToEnd}m
          </p>
        </div>

        <!--
        ‚ñì NOTE:
        ‚ñì > countdown (seconds)
        -->
        <div
          class=
          "
          countdown-box-child
          "
        >
          <p
            class=
            "
            s-16
            w-500
            color-black-2
            "
          >
            {widgetState == 'CountdownWithDefinedDate' ? countDownSecToStart : countDownSecToEnd}s
          </p>
        </div>

      </div>

    {:else}

      <!--
      ‚ñì NOTE:
      ‚ñì > round state (parent)
      -->
      <div
        id="round-info-box-parent"
      >
        <p
          class=
          "
          s-16
          w-500
          color-grey
            dark-v1
          "
        >
          {#if widgetState == 'ToBeAnnounced'}
            Date To Be Announced
          {:else if widgetState == 'InviteOnly'}
            Invite Only
          {:else if widgetState == 'Ended'}
            Ended
          {/if}
        </p>
      </div>

    {/if}

  </div>

  <!--
  ‚ñì NOTE:
  ‚ñì > middle box (parent)
  -->
  <div
    id="{CNAME}‚Æïmiddle-box"
  >

    <!--
    ‚ñì NOTE:
    ‚ñì > progress box (parent)
    -->
    <div>

      <!--
      ‚ñì NOTE:
      ‚ñì > progress title + progress percentage
      -->
      <div
        class=
        "
        row-space-out
        "
      >
        <!--
        ‚ñì NOTE:
        ‚ñì > progress title
        -->
        <p
          class=
          "
          s-20
          w-500
          color-black-2
          m-b-16
          "
        >
          Progress
        </p>

        <!--
        ‚ñì NOTE:
        ‚ñì > progress percetage
        -->
        <p
          class=
          "
          s-20
          w-500
          color-green
          "
        >
          {toDecimalFix(datePercentageDiff) ?? 0}%
        </p>
      </div>

      <!--
      ‚ñì NOTE:
      ‚ñì > progress bar
      -->
      <div
        id="progress-bar"
        class=
        "
        m-b-16
        "
      >
        <div
          style="width: {datePercentageDiff ?? 0}%;"
        />
      </div>

      <!--
      ‚ñì NOTE:
      ‚ñì > progress funds + progress limit
      -->
      <div
        class=
        "
        row-space-out
        "
      >
        <!--
        ‚ñì NOTE:
        ‚ñì > progress funds
        -->
        <p
          class=
          "
          s-16
          color-black-2
          "
        >
          {mapInvestorData?.get('round')?.data?.find(x => x?.lang == 'en')?.current_value_title}
          <span
            class=
            "
            w-600
            "
          >
            <!-- ${WIDGET_DATA?.txProgressRaised} -->
            ${mapInvestorData?.get('round')?.values?.current_value ?? '-'}
          </span>
        </p>

        <!--
        ‚ñì NOTE:
        ‚ñì > progress limit
        -->
        <p
          class=
          "
          s-12
          color-grey
          "
        >
          {mapInvestorData?.get('round')?.data?.find(x => x?.lang == 'en')?.max_title ?? 'Unlimited'}
        </p>
      </div>

    </div>

    <!--
    ‚ñì NOTE:
    ‚ñì > token information section (parent)
    -->
    <div>

      {#each roundData ?? [] as item}

        <!--
        ‚ñì NOTE:
        ‚ñì > token information segment title
        -->
        <p
          class=
          "
          s-16
          color-black-2
          w-500
          m-t-25
          m-b-8
          "
        >
          {item?.title}
        </p>

        <!--
        ‚ñì NOTE:
        ‚ñì > token information row(s)
        -->
        <div
          class=
          "
          token-info-box
          "
        >

          {#each item?.data ?? [] as subItem}

            <div
              class=
              "
              row-space-out
              <!---->
              token-info-row
              "
            >
              <!--
              ‚ñì NOTE:
              ‚ñì > token row title
              -->
              <p
                class=
                "
                s-14
                
                color-grey
                  grey-v1
                "
              >
                {subItem?.row_title ?? ''}
              </p>

              <!--
              ‚ñì NOTE:
              ‚ñì > token row title
              -->
              <p
                class=
                "
                s-16
                color-black-2
                w-500
                "
              >
                {subItem?.value ?? ''}
              </p>

            </div>

          {/each}

        </div>

      {/each}

    </div>

  </div>

</div>

<!--
‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
### COMPONENT STYLE                                                                    ‚óºÔ∏è
### NOTE:                                                                              ‚óºÔ∏è
### auto-fill/auto-complete iniside <style> for var() values by typing/CTRL+SPACE      ‚óºÔ∏è
### NOTE:                                                                              ‚óºÔ∏è
### access custom Betarena Scores CSS VScode Snippets by typing 'style...'             ‚óºÔ∏è
‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
-->

<style>

  div#profile‚Æïw‚Æïinvestround‚Æïmain
  {
    /* üìå position */
    position: relative;
    /* üé® style */
    border-radius: 12px;
    overflow: hidden;
    height: fit-content;
  }

  div#profile‚Æïw‚Æïinvestround‚Æïmain‚Æïtop-row
  {
    /* üìå position */
    position: relative;
    /* üé® style */
    padding: 20px;
    padding-top: 24px;
    background: var(--white);
    box-shadow: 0px 4px 16px 0px rgba(0, 0, 0, 0.08);
    /* z-index: 10; */
  }

  div#profile‚Æïw‚Æïinvestround‚Æïmain‚Æïtop-row div#countdown-box-parent
  {
    /* üìå position */
    position: relative;
    /* üé® style */
    border-radius: 4px;
    overflow: hidden;
    /* üõù layout */
    display: grid;
    gap: 2px;
    grid-auto-flow: column;
  }
  div#profile‚Æïw‚Æïinvestround‚Æïmain‚Æïtop-row div.countdown-box-child
  {
    /* üìå position */
    position: relative;
    /* üé® style */
    padding: 17px 0;
    background: var(--whitev2);
    width: 60px;
    height: 60px;
    text-align: center;
  }

  div#profile‚Æïw‚Æïinvestround‚Æïmain‚Æïtop-row div#round-info-box-parent
  {
    /* üìå position */
    position: relative;
    /* üé® style */
    padding: 20px;
    border-radius: 4px;
    background: var(--whitev2);
    width: fit-content;
    height: 60px;
  }

  div#profile‚Æïw‚Æïinvestround‚Æïmain‚Æïmiddle-box
  {
    /* üé® style */
    padding: 20px;
    background: var(--white);
    display: grid;
    gap: 12px;
  }

  div#profile‚Æïw‚Æïinvestround‚Æïmain‚Æïmiddle-box div#progress-bar
  {
    /* üé® style */
    height: 6px;
    border-radius: 12px;
    width: 100%;
    background-color: var(--grey-color);
  }
  div#profile‚Æïw‚Æïinvestround‚Æïmain‚Æïmiddle-box div#progress-bar > div
  {
    /* üé® style */
		background-color: var(--green-success);
		/* width: 40%; */ /* Adjusted with JavaScript */
    height: 6px;
    border-radius: 12px;
	}

  div#profile‚Æïw‚Æïinvestround‚Æïmain‚Æïmiddle-box div.token-info-box div.token-info-row
  {
    /* üé® style */
    border-radius: 4px;
    padding: 10px 20px;
    height: 40px;
  }
  div#profile‚Æïw‚Æïinvestround‚Æïmain‚Æïmiddle-box div.token-info-box div.token-info-row:nth-child(odd)
  {
    /* üé® style */
    background-color: var(--whitev2);
  }

  /*
  ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
  ‚óºÔ∏è üåí DARK-THEME         ‚óºÔ∏è
  ‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è‚óºÔ∏è
  */

  div#profile‚Æïw‚Æïinvestround‚Æïmain.dark-background-1 div#profile‚Æïw‚Æïinvestround‚Æïmain‚Æïtop-row
  {
    /* üé® style */
    background-color: var(--dark-theme-1);
  }

  div#profile‚Æïw‚Æïinvestround‚Æïmain.dark-background-1 div#profile‚Æïw‚Æïinvestround‚Æïmain‚Æïmiddle-box
  {
    /* üé® style */
    background-color: var(--dark-theme-1-4-shade);
  }

  div#profile‚Æïw‚Æïinvestround‚Æïmain.dark-background-1 div#profile‚Æïw‚Æïinvestround‚Æïmain‚Æïtop-row div.countdown-box-child
  {
    /* üé® style */
    background: var(--dark-theme-1-4-shade);
  }

  div#profile‚Æïw‚Æïinvestround‚Æïmain.dark-background-1 div#profile‚Æïw‚Æïinvestround‚Æïmain‚Æïmiddle-box div#progress-bar
  {
    /* üé® style */
    background-color: var(--dark-theme-1);
  }

  div#profile‚Æïw‚Æïinvestround‚Æïmain.dark-background-1 div#profile‚Æïw‚Æïinvestround‚Æïmain‚Æïmiddle-box div.token-info-box div.token-info-row:nth-child(odd)
  {
    /* üé® style */
    background-color: var(--dark-theme-1);
  }

  div#profile‚Æïw‚Æïinvestround‚Æïmain.dark-background-1 div#profile‚Æïw‚Æïinvestround‚Æïmain‚Æïtop-row div#round-info-box-parent
  {
    /* üé® style */
    background-color: var(--dark-theme-1-4-shade);
  }

</style>
